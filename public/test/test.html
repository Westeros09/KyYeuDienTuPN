<!DOCTYPE html>
<html lang="en">

<head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.5/css/lightbox.min.css">
</head>

<body>

        <section class="container">
                <div id="macy">
                        <div class="box">
                                <a data-fancybox="gallery" href="../assets/img/HoatDong/ChinhTri/1.jpg"
                                        data-thumb="../assets/img/HoatDong/ChinhTri/1.jpg" data-title="Mô tả ảnh số 1">
                                        <img src="../assets/img/HoatDong/ChinhTri/1.jpg" alt="">
                                </a>
                        </div>
                        <div class="box">
                                <a data-fancybox="gallery" href="../assets/img/HoatDong/ChinhTri/2.jpg"
                                        data-thumb="../assets/img/HoatDong/ChinhTri/2.jpg">
                                        <img src="../assets/img/HoatDong/ChinhTri/2.jpg" alt="">
                                </a>
                        </div>
                        <div class="box">
                                <a data-fancybox="gallery" href="../assets/img/HoatDong/ChinhTri/3.jpg"
                                        data-thumb="../assets/img/HoatDong/ChinhTri/3.jpg">
                                        <img src="../assets/img/HoatDong/ChinhTri/3.jpg" alt="">
                                </a>
                        </div>
                        <div class="box">
                                <a data-fancybox="gallery" href="../assets/img/HoatDong/ChinhTri/10.jpg"
                                        data-thumb="../assets/img/HoatDong/ChinhTri/10.jpg">
                                        <img src="../assets/img/HoatDong/ChinhTri/10.jpg" alt="">
                                </a>
                        </div>
                        <div class="box">
                                <a data-fancybox="gallery" href="../assets/img/HoatDong/ChinhTri/7.jpg"
                                        data-thumb="../assets/img/HoatDong/ChinhTri/7.jpg">
                                        <img src="../assets/img/HoatDong/ChinhTri/7.jpg" alt="">
                                </a>
                        </div>
                        <div class="box">
                                <a data-fancybox="gallery" href="../assets/img/HoatDong/ChinhTri/5.jpg"
                                        data-thumb="../assets/img/HoatDong/ChinhTri/5.jpg">
                                        <img src="../assets/img/HoatDong/ChinhTri/5.jpg" alt="">
                                </a>
                        </div>
                        <div class="box ">
                                <a data-fancybox="gallery" href="../assets/img/HoatDong/ChinhTri/6.jpg"
                                        data-thumb="../assets/img/HoatDong/ChinhTri/6.jpg">
                                        <img src="../assets/img/HoatDong/ChinhTri/6.jpg" alt="">
                                </a>
                        </div>


                        <div class="box ">
                                <a data-fancybox="gallery" href="../assets/img/HoatDong/ChinhTri/4.jpg"
                                        data-thumb="../assets/img/HoatDong/ChinhTri/4.jpg">
                                        <img src="../assets/img/HoatDong/ChinhTri/4.jpg" alt="">
                                </a>
                        </div>
                        <div class="box ">
                                <a data-fancybox="gallery" href="../assets/img/HoatDong/ChinhTri/8.jpg"
                                        data-thumb="../assets/img/HoatDong/ChinhTri/8.jpg">
                                        <img src="../assets/img/HoatDong/ChinhTri/8.jpg" alt="">
                                </a>
                        </div>
                        <div class="box  ">
                                <a data-fancybox="gallery" href="../assets/img/HoatDong/ChinhTri/9.jpg"
                                        data-thumb="../assets/img/HoatDong/ChinhTri/9.jpg">
                                        <img src="../assets/img/HoatDong/ChinhTri/9.jpg" alt="">
                                </a>
                        </div>

                        <div class="box hidden">
                                <a data-fancybox="gallery" href="../assets/img/HoatDong/ChinhTri/80 nam quan doi/1.jpg"
                                        data-thumb="../assets/img/HoatDong/ChinhTri/80 nam quan doi/1.jpg">
                                        <img src="../assets/img/HoatDong/ChinhTri/80 nam quan doi/1.jpg" alt="">
                                </a>
                        </div>
                        <div class="box hidden ">
                                <a data-fancybox="gallery" href="../assets/img/HoatDong/ChinhTri/80 nam quan doi/2.jpg"
                                        data-thumb="../assets/img/HoatDong/ChinhTri/80 nam quan doi/2.jpg">
                                        <img src="../assets/img/HoatDong/ChinhTri/80 nam quan doi/2.jpg" alt="">
                                </a>
                        </div>
                        <div class="box hidden ">
                                <a data-fancybox="gallery" href="../assets/img/HoatDong/ChinhTri/80 nam quan doi/3.jpg"
                                        data-thumb="../assets/img/HoatDong/ChinhTri/80 nam quan doi/3.jpg">
                                        <img src="../assets/img/HoatDong/ChinhTri/80 nam quan doi/3.jpg" alt="">
                                </a>
                        </div>
                        <div class="box hidden ">
                                <a data-fancybox="gallery" href="../assets/img/HoatDong/ChinhTri/80 nam quan doi/4.jpg"
                                        data-thumb="../assets/img/HoatDong/ChinhTri/80 nam quan doi/4.jpg">
                                        <img src="../assets/img/HoatDong/ChinhTri/80 nam quan doi/4.jpg" alt="">
                                </a>
                        </div>
                        <!-- <div class="box hidden ">
                                <a data-fancybox="gallery" href="../assets/img/HoatDong/ChinhTri/80 nam quan doi/5.png"
                                        data-thumb="../assets/img/HoatDong/ChinhTri/80 nam quan doi/5.png">
                                        <img src="../assets/img/HoatDong/ChinhTri/80 nam quan doi/5.png" alt="">
                                </a>
                        </div> -->
                        <div class="box hidden ">
                                <a data-fancybox="gallery" href="../assets/img/HoatDong/ChinhTri/Ban giao nha/1.jpg"
                                        data-thumb="../assets/img/HoatDong/ChinhTri/Ban giao nha/1.jpg">
                                        <img src="../assets/img/HoatDong/ChinhTri/Ban giao nha/1.jpg" alt="">
                                </a>
                        </div>
                        <div class="box hidden ">
                                <a data-fancybox="gallery" href="../assets/img/HoatDong/ChinhTri/Ban giao nha/2.jpg"
                                        data-thumb="../assets/img/HoatDong/ChinhTri/Ban giao nha/2.jpg">
                                        <img src="../assets/img/HoatDong/ChinhTri/Ban giao nha/2.jpg" alt="">
                                </a>
                        </div>
                        <div class="box hidden ">
                                <a data-fancybox="gallery" href="../assets/img/HoatDong/ChinhTri/Can bo/1.jpg"
                                        data-thumb="../assets/img/HoatDong/ChinhTri/Can bo/1.jpg">
                                        <img src="../assets/img/HoatDong/ChinhTri/Can bo/1.jpg" alt="">
                                </a>
                        </div>
                        <div class="box hidden ">
                                <a data-fancybox="gallery"
                                        href="../assets/img/HoatDong/ChinhTri/Dai hoi chi doi P10/1.jpg"
                                        data-thumb="../assets/img/HoatDong/ChinhTri/Dai hoi chi doi P10/1.jpg">
                                        <img src="../assets/img/HoatDong/ChinhTri/Dai hoi chi doi P10/1.jpg" alt="">
                                </a>
                        </div>

                </div>

                <div style="text-align: center; margin-top: 16px;">
                        <button id="toggleBtn">Xem thêm</button>
                </div>
        </section>


        <script src="../assets/js/macy.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css" />
        <script>
                var macy = Macy({
                        container: '#macy',
                        trueOrder: false,
                        waitForImages: false,
                        margin: 30,
                        columns: 4,
                        breakAt: {
                                1200: 4,
                                940: 3,
                                520: 2,
                                400: 1
                        }
                });
                macy.runOnImageLoad(function () {
                        var show = document.getElementById("macy")
                        show.classList.add("show");

                        // console.log('I only get called when all images are loaded');
                        macy.recalculate(true, true);
                });

                Fancybox.bind('[data-fancybox="gallery"]', {
                        dragToClose: false,

                        tpl: {
                                main: `<div class="fancybox__container has-sidebar" role="dialog" aria-modal="true" aria-label="{{MODAL}}" tabindex="-1">
      <div class="fancybox__backdrop"></div>
      <div class="fancybox__cols">
        <div class="fancybox__col">
          <div class="fancybox__carousel"></div>
          <div class="fancybox__footer"></div>
        </div>
        <div class="fancybox__col">
          <div class="fancybox__data">
       
            <p class="font-semibold" id="fancybox_title"></p>
          </div>
        </div>
      </div>
    </div>`
                        },

                        Toolbar: {
                                parentEl: (toolbar) => {
                                        return toolbar.instance.container.querySelector('.fancybox__col');
                                },
                                items: {
                                        sidebar: {
                                                tpl: `<button class="f-button"><svg><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg></button>`,
                                                click: (toolbar) => {
                                                        toolbar.instance.container.classList.toggle('has-sidebar');
                                                },
                                        },
                                },
                                display: {
                                        left: ['infobar'],
                                        middle: [],
                                        right: ['sidebar', 'thumbs', 'close'],
                                },
                        },

                        Images: {
                                zoom: false,
                        },

                        Thumbs: {
                                type: 'modern',
                        },

                        on: {
                                'Carousel.ready Carousel.change': (fancybox) => {
                                        const titleVal = fancybox.getSlide()?.triggerEl?.dataset?.title || 'Chưa có mô tả';
                                        const titleEl = document.getElementById('fancybox_title');
                                        if (titleEl) {
                                                titleEl.textContent = titleVal;
                                        }

                                        // Đặt background cho blur nếu muốn
                                        fancybox.container.style.setProperty(
                                                '--bg-image',
                                                `url("${fancybox.getSlide().thumbSrc}")`
                                        );
                                },
                        },
                });


                const toggleBtn = document.getElementById('toggleBtn');
                const hiddenBoxes = document.querySelectorAll('#macy .box:nth-child(n+11)');

                toggleBtn.addEventListener('click', () => {
                        const isHidden = hiddenBoxes[0].classList.contains('hidden');

                        hiddenBoxes.forEach(box => {
                                box.classList.toggle('hidden');
                        });

                        toggleBtn.textContent = isHidden ? 'Rút gọn' : 'Xem thêm';
                        macy.runOnImageLoad(function () {
                                macy.recalculate(true, true);
                        }, true);
                });
        </script>
</body>

</html>